<!DOCTYPE html>
<html>


<!-- Mirrored from www.phpya.com.ar/temarios/descripcion.php?punto=16&cod=37&inicio=10 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 15 Sep 2015 15:08:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<title>Tutorial de PHP - Temario</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="UTF-8">
<meta name="keywords" content="php, programación, webmaster, tutorial">
<meta name="description" content="El objetivo de este tutorial 
es presentar los conceptos básicos de php.">
<meta name="author" content="Diego Moisset">

<style>

html,body {
	background-color: #D3E9D0;
	font-family: Verdana,arial,sans-serif;
	font-size: 1em;
}

h1 {
	font-size: 14pt;
	margin: 0%;
}

.recuadro {
  background-color:#ffffcc;
  text-align:left;
  font-family:courier;
  font-size:1.1em;
  border-width:0;
  padding:5px;

  border: 1px dotted #ffaa00;
  margin-left:5px;
}

#recuadrooculto {
  display: none;
}


.recuadroborde {
  //  max-height: 400pt;
	overflow: auto;
    font-family: consolas, monospace;
    font-size: 12pt;
    margin-left: 1%;
    margin-right: 1%;
    background-color:#ffffcc;	
    padding: 7px;
    border: 2px ridge black;
    border-radius: 7px;
	clear:left;
}

pre {
 	overflow: auto;
    font-family: consolas, monospace;
    font-size: 12pt;
    margin-left: 1%;
    margin-right: 1%;
    background-color: #aed7a8;
    padding: 7px;
    border: 0px;
}

</style>

<script type="text/javascript">
function cambiar()
{
  document.getElementById('recuadrooculto').style.display='block';
}

</script>

</head>

<body>



<div style="background-color: #AED7A8;max-width: 950px;	margin-left: auto;margin-right: auto;border-radius:7px;padding:10px">
<h1><span style="font-size:1em;margin-right:1em"><a href="../index4231-2.html?inicio=10">Temario del Tutorial</a></span>16 - Lectura de un archivo de texto.</h1></div>

<br>
<div style="background-color: #AED7A8;max-width: 950px;	border-radius:7px;padding:10px;margin-left: auto;margin-right: auto">

<div style="display:block;float:left;margin: 5px;"> 
<script type="text/javascript"><!--
google_ad_client = "pub-4669394804436935";
/* 300x250, creado 6/11/08 novi */
google_ad_slot = "7481492727";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/f.txt">
</script>

</div> 


<p>Para la lectura de un archivo de texto contamos con la función fgets. Además debemos abrir el archivo para lectura.</p>
<p>La apertura para leer:</p>
<pre>
  $ar=fopen(&quot;datos.txt&quot;,&quot;r&quot;) or
    die(&quot;No se pudo abrir el archivo&quot;);
</pre>
<p>Para leer:</p>
<pre>
    $linea=fgets($ar);
</pre>

<p>Veamos como mostrar por pantalla el contenido del archivo "datos.txt" creado en el punto anterior:</p>

<pre class="recuadroborde">
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Problema&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;?php
  $ar=fopen(&quot;datos.txt&quot;,&quot;r&quot;) or
    die(&quot;No se pudo abrir el archivo&quot;);
  while (!feof($ar))
  {
    $linea=fgets($ar);
    $lineasalto=nl2br($linea);
    echo $lineasalto;
  }
  fclose($ar);
  ?&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<p>Lo primero que debemos identificar es la forma de apertura del archivo:</p>
<pre>
  $ar=fopen(&quot;datos.txt&quot;,&quot;r&quot;) or
  die(&quot;No se pudo abrir el archivo&quot;);
</pre>
<p>El segundo parámetro de fopen es "r" es decir read (apertura para lectura), si el archivo no existe por ejemplo se ejecuta la función die que finaliza el programa mostrando el string correspondiente.</p>
<p>La función feof retorna true si se ha llegado al final del archivo en caso contrario retorna false. Para que se impriman todas las líneas del archivo se plantea una estructura repetitiva que se ejecuta mientras no se llegue al final de archivo (el operador lógico not en PHP es el caracter !):</p>
<pre>
  while (!feof($ar))
</pre>
<p>Dentro de la estructura repetitiva leemos una línea completa del archivo de texto con la función fgets:</p>
<pre>
  $linea=fgets($ar);
</pre>
<p>La variable $linea contiene una línea completa del archivo de texto, inclusive el salto de línea (\n)</p>
<p>Como el navegador no hace un salto de línea con este caracter, debemos convertir dicho caracter al elemento &lt;br&gt; propia de HTML. La función que realiza esta actividad se llama nl2br (new line to br)</p>
<p>El resultado se almacena en una nueva variable que es la que realmente imprimimos:</p>
<pre>
  $lineasalto=nl2br($linea);
  echo $lineasalto;
</pre>

<br>
<br>

<h2>Problema resuelto.</h2>
<p>Copiar el contenido de este cuadro de texto al NotePad++ y grabarlo en la carpeta c:\wamp\www con un nombre con extensión php (si hay varios cuadros
de texto grabar cada uno en un archivo distinto).<br>
  luego abrir el navegador (Chrome, FireFox, IExplorer etc.) y en la barra de direcciones tipear: http://localhost/pagina1.php (o el nombre del
archivo que le dió)  </p>
<form name="formulario" action="#" target="ventanaForm" 
 onsubmit=  "abrirVentana()"  method="post" >
    pagina1.php<br><textarea class="programafuente" name="programa" rows=15 cols=110 wrap="off" readonly>
<html>
<head>
<title>Problema</title>
</head>
<body>

<?php
$ar=fopen("datos.html","r") or
  die("No se pudo abrir el archivo");
while (!feof($ar))
{
  $linea=fgets($ar);
  $lineasalto=nl2br($linea);
  echo $lineasalto;
}
fclose($ar);
?>

</body>

<!-- Mirrored from www.phpya.com.ar/temarios/descripcion.php?punto=16&cod=37&inicio=10 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 15 Sep 2015 15:08:31 GMT -->
</html>
</textarea>
    <br>
	 <a href="http://www.scratchya.com.ar/problemas/phpya/resu/37/pagina1.php" style="font-style:Arial;font-size:2em;margin-right:15px;" target="_blank">Ejecutar ejemplo</a> 
<!--    <a href="http://localhost:8080/problemas/phpya/resu/37/pagina1.php" style="font-style:Arial;font-size:2em;margin-right:15px;" target="_blank">Ejecutar ejemplo</a>-->

    <br>
<table width="650px">
<tr>
<td align="left">	

</td>
</tr>
</table>

	
    
</form>






	

<h2>Problema propuesto.</h2>
<p>Confeccionar un programa que muestre el archivo de pedido de pizzas via internet del punto anterior.</p>
<p>Recordemos que creamos el archivo de texto llamado pedidos.txt (grabar la página php en el mismo directorio donde se encuentra el archivo pedidos.txt)</p>
<form name="formulario" action="#" target="ventanaForm" 
onsubmit="abrirVentana()" method="post" >

<a href="javascript:cambiar()" id="solucion">Solución</a>
<div id="recuadrooculto">
pagina1.php<br>
<textarea class="programafuente" name="programa" rows=15 cols=110 wrap="off" readonly>
<html>
<head>
<title>Problema</title>
</head>
<body>

<?php
$ar=fopen("pedidos.html","r") or
  die("No se pudo abrir el archivo");
while (!feof($ar))
{
  $linea=fgets($ar);
  $lineasalto=nl2br($linea);
  echo $lineasalto;
}
fclose($ar);
?>

</body>
</html>
</textarea>
 <br>
<!-- <a href="http://localhost:8080/problemas/phpya/propu/37/pagina1.php" style="font-style:Arial;font-size:2em;margin-right:15px;" target="_blank">Ejecutar ejemplo</a>-->


  <a href="http://www.scratchya.com.ar/problemas/phpya/propu/37/pagina1.php" style="font-style:Arial;font-size:2em;margin-right:15px;" target="_blank">Ejecutar ejemplo</a> 
	<br>	

</div>

</form>



  

<br>
<table width="700px">
<tr>
<td align="left">	
<script type="text/javascript"><!--
google_ad_client = "ca-pub-4669394804436935";
/* fondo-izquierda-grande */
google_ad_slot = "2944336362";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/f.txt">
</script>
</td>
</tr>
</table>


<form name="form1" method="post" action="#">
  <div>
   <h2><a href="../index4231.html?inicio=10">Retornar</a></h2>   
  </div>

  
</form>

<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-628756-4";
urchinTracker();
</script>

</body>

</html>
