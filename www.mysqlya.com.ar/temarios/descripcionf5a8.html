

<html>


<!-- Mirrored from www.mysqlya.com.ar/temarios/descripcion.php?inicio=21&cod=35&punto=36 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 15 Sep 2015 15:10:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=ISO-8859-1" /><!-- /Added by HTTrack -->
<head>
<title>Temario:Selección de un grupo de registros (having)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../css/estilos.css" rel="stylesheet" type="text/css">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<style>
html,body {
	background-color: #D3E9D0;
	font-family: Trebuchet MS, Verdana, Arial, sans-serif;
	font-size: 10pt;
	text-align:center;
}

h1 {
	font-size: 14pt;
	margin: 0%;
}


</style>
</head>

<body>

<div class="upperleft">
  <div class="upperright">
    <div class="lowerleft">
      <div class="lowerright">

<table width="98%">
<tr>
<td> 
<h1>36 - Selección de un grupo de registros (having)</h1></td>
<td align="right">
<!--<a href="http://www.mysqlya.com.ar/publicidad/"><img border="0" style="margin:5px;padding-left:2px" src="../imagenes/publicidad.png"></a>	-->
</td>
</tr>
</table>

      </div>
    </div>
  </div>
</div>
<br>


<div class="upperleft">
  <div class="upperright">
    <div class="lowerleft">
      <div class="lowerright">

<p>

<div style="display:block;float:left;margin: 5px;"> 
 
<script async src="../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
<!-- propuesto-javaya -->
<ins class="adsbygoogle"
     style="display:inline-block;width:336px;height:280px"
     data-ad-client="ca-pub-4669394804436935"
     data-ad-slot="1400020364"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
 
</div> 		  

<p>Así como la cláusula "where" permite seleccionar (o rechazar) registros individuales; la cláusula "having" permite seleccionar (o rechazar) un grupo de registros.</p>

<p>Si queremos saber la cantidad de libros agrupados por editorial usamos la siguiente instrucción ya aprendida:</p>
<pre>
 select editorial, count(*) from libros
  group by editorial;
</pre>
<p>Si queremos saber la cantidad de libros agrupados por editorial pero considerando sólo algunos grupos, por ejemplo, los que devuelvan un valor mayor a 2, usamos la siguiente instrucción:</p>
<pre>
 select editorial, count(*) from libros
  group by editorial
  having count(*)>2;
</pre>
<p>Se utiliza "having", seguido de la condición de búsqueda, para seleccionar ciertas filas retornadas por la cláusula "group by".</p>

<p>Veamos otros ejemplos. Queremos el promedio de los precios de los libros agrupados por editorial:</p>
<pre>
 select editorial, avg(precio) from libros
  group by editorial;
</pre>
<p>Ahora, sólo queremos aquellos cuyo promedio supere los 25 pesos:</p>
<pre>
 select editorial, avg(precio) from libros
  group by editorial
  having avg(precio)>25;
</pre>
<p>En algunos casos es posible confundir las cláusulas "where" y "having". Queremos contar los registros agrupados por editorial sin tener en cuenta a la editorial "Planeta".</p>
<p>Analicemos las siguientes sentencias:</p>
<pre>
 select editorial, count(*) from libros
  where editorial<>'Planeta'
  group by editorial;
 select editorial, count(*) from libros
  group by editorial
  having editorial<>'Planeta';
</pre>
<p>Ambas devuelven el mismo resultado, pero son diferentes.</p><p>La primera, selecciona todos los registros rechazando los de editorial "Planeta" y luego los agrupa para contarlos. La segunda, selecciona todos los registros, los agrupa para contarlos y finalmente rechaza la cuenta correspondiente a la editorial "Planeta".</p>

<p>No debemos confundir la cláusula "where" con la cláusula "having"; la primera establece condiciones para la selección de registros de un "select"; la segunda establece condiciones para la selección de registros de una salida "group by".</p>

<p>Veamos otros ejemplos combinando "where" y "having".</p> <p>Queremos la cantidad de libros, sin considerar los que tienen precio nulo, agrupados por editorial, sin considerar la editorial "Planeta":</p>
<pre>
 select editorial, count(*) from libros
  where precio is not null
  group by editorial
  having editorial<>'Planeta';
</pre>
<p>Aquí, selecciona los registros rechazando los que no cumplan con la condición dada en "where", luego los agrupa por "editorial" y finalmente rechaza los grupos que no cumplan con la condición dada en el "having".</p>

<p>Generalmente se usa la cláusula "having" con funciones de agrupamiento, esto no puede hacerlo la cláusula
"where". Por ejemplo queremos el promedio de los precios agrupados por editorial, de aquellas editoriales que tienen más de 2 libros:</p>
<pre>
 select editorial, avg(precio) from libros
  group by editorial
  having count(*) > 2; 
</pre>
<p>Podemos encontrar el mayor valor de los libros agrupados por editorial y luego seleccionar las filas que tengan un valor mayor o igual a 30:</p>
<pre>
 select editorial, max(precio) from libros
  group by editorial
  having max(precio)>=30; 
</pre>
<p>Esta misma sentencia puede usarse empleando un "alias", para hacer referencia a la columna de la expresión:</p>
<pre>
 select editorial, max(precio) as 'mayor' from libros
  group by editorial
  having mayor>=30;
</pre> </p>

<table width="700px">
<tr>
<td align="left">	

<script type="text/javascript"><!--
google_ad_client = "ca-pub-4669394804436935";
/* fondo-izquierda-grande */
google_ad_slot = "2944336362";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/f.txt">
</script>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-4669394804436935";
/* fondo-derecha-grande */
google_ad_slot = "7374535966";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/f.txt">
</script>

</td>
</tr>
</table>

   <h2><a href="../index10fd.html?inicio=21">Retornar</a></h2>   


      </div>
    </div>
  </div>
</div>

<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-628756-5";
urchinTracker();
</script>


</body>


<!-- Mirrored from www.mysqlya.com.ar/temarios/descripcion.php?inicio=21&cod=35&punto=36 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 15 Sep 2015 15:10:28 GMT -->
</html>
