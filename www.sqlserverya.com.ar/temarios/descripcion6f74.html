<html>


<!-- Mirrored from www.sqlserverya.com.ar/temarios/descripcion.php?inicio=75&cod=85&punto=79 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 15 Sep 2015 15:10:32 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=ISO-8859-1" /><!-- /Added by HTTrack -->
<head>
<title>Tutorial de SQL Server </title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../css/estilos.css" rel="stylesheet" type="text/css">
	  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">

<style>
html,body {
	background-color: #D3E9D0;
	font-family: Trebuchet MS, Verdana, Arial, sans-serif;
	font-size: 10pt;
	text-align:center;
}

h1 {
	font-size: 14pt;
	margin: 0%;
}


</style>
</head>

<body>

<div class="upperleft">
  <div class="upperright">
    <div class="lowerleft">
      <div class="lowerright">

<table width="98%">
<tr>
<td> 
<h1>79 - Restricciones foreign key deshabilitar y eliminar (with check - nocheck)</h1></td>
<td align="right">
<!--<a href="http://www.sqlserverya.com.ar/publicidad/"><img border="0" style="margin:5px;padding-left:2px" src="../imagenes/publicidad.png"></a>	-->

</td>
</tr>
</table>

      </div>
    </div>
  </div>
</div>
<br>


<div class="upperleft">
  <div class="upperright">
    <div class="lowerleft">
      <div class="lowerright">

<div style="display:block;float:left;margin: 5px;"> 
 
<script type="text/javascript"><!--
google_ad_client = "pub-4669394804436935";
/* 300x250, creado 6/11/08 novi */
google_ad_slot = "7481492727";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/f.txt">
</script>
 
</div> 	  
<p>
<p>Sabemos que si agregamos una restricción a una tabla que contiene datos, SQL Server los controla para asegurarse que cumplen con la restricción; es posible deshabilitar esta comprobación.</p>

<p>Podemos hacerlo al momento de agregar la restricción a una tabla con datos, incluyendo la opción "with nocheck" en la instrucción "alter table"; si se emplea esta opción, los datos no van a cumplir la restricción.</p>

<p>Se pueden deshabilitar las restricciones "check" y "foreign key", a las demás se las debe eliminar.</p>
<p>La sintaxis básica al agregar la restriccción "foreign key" es la siguiente:</p>
<pre>
 alter table NOMBRETABLA1
  with OPCIONDECHEQUEO
  add constraint NOMBRECONSTRAINT
  foreign key (CAMPOCLAVEFORANEA)
  references NOMBRETABLA2 (CAMPOCLAVEPRIMARIA)
  on update OPCION
  on delete OPCION;
</pre>
<p>La opción "with OPCIONDECHEQUEO" especifica si se controlan los datos existentes o no con "check" y "nocheck" respectivamente. Por defecto, si no se especifica, la opción es "check".</p>

<p>En el siguiente ejemplo agregamos una restricción "foreign key" que controla que todos los códigos de editorial tengan un código válido, es decir, dicho código exista en "editoriales". La restricción no se aplica en los datos existentes pero si en los siguientes ingresos, modificaciones y actualizaciones:</p>
<pre>
 alter table libros
 with nocheck
 add constraint FK_libros_codigoeditorial
 foreing key (codigoeditorial)
 references editoriales(codigo);
</pre>
<p>La comprobación de restricciones se puede deshabilitar para modificar, eliminar o agregar datos a una tabla sin comprobar la restricción. La sintaxis general es:</p>
<pre>
 alter table NOMBRETABLA
 OPCIONDECHEQUEO constraint NOMBRERESTRICCION;
</pre>
<p>En el siguiente ejemplo deshabilitamos la restricción creada anteriormente:</p>
<pre>
 alter table libros
 nocheck constraint FK_libros_codigoeditorial;
</pre>
<p>Para habilitar una restricción deshabilitada se ejecuta la misma instrucción pero con la cláusula "check" o "check all":</p>
<pre>
 alter table libros
  check constraint FK_libros_codigoeditorial;
</pre>
<p>Si se emplea "check constraint all" no se coloca nombre de restricciones, habilita todas las restricciones que tiene la tabla nombrada ("check" y "foreign key").</p>

<p>Para saber si una restricción está habilitada o no, podemos ejecutar el procedimiento almacenado "sp_helpconstraint" y entenderemos lo que informa la columna "status_enabled".</p>

<p>Entonces, las cláusulas "check" y "nocheck" permiten habilitar o deshabilitar restricciones "foreign key" (y "check"). Pueden emplearse para evitar la comprobación de datos existentes al crear la restricción o para deshabilitar la comprobación de datos al ingresar, actualizar y eliminar algún registro que infrinja la restricción.</p>

<p>Podemos eliminar una restricción "foreign key" con "alter table". La sintaxis básica es la misma que para cualquier otra restricción:</p>
<pre>
 alter table TABLA
  drop constraint NOMBRERESTRICCION;
</pre>
<p>Eliminamos la restricción de "libros":</p>
<pre>
 alter table libros
  drop constraint FK_libros_codigoeditorial;
</pre>
<p>No se puede eliminar una tabla si una restricción "foreign key" hace referencia a ella.</p>
<p>Cuando eliminamos una tabla que tiene una restricción "foreign key", la restricción también se elimina.</p>

</p>

<table width="700px">
<tr>
<td align="left">	

<script type="text/javascript"><!--
google_ad_client = "ca-pub-4669394804436935";
/* fondo-izquierda-grande */
google_ad_slot = "2944336362";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/f.txt">
</script>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-4669394804436935";
/* fondo-derecha-grande */
google_ad_slot = "7374535966";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/f.txt">
</script>

</td>
</tr>
</table>
<br>
   <h2><a href="../indexa021.html?inicio=75">Retornar</a></h2>   
      </div>
    </div>
  </div>
</div>

<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-628756-11";
urchinTracker();
</script>


</body>


<!-- Mirrored from www.sqlserverya.com.ar/temarios/descripcion.php?inicio=75&cod=85&punto=79 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 15 Sep 2015 15:10:32 GMT -->
</html>
